head	1.4;
access;
symbols;
locks; strict;
comment	@# @;


1.4
date	2009.09.06.22.03.21;	author root;	state Exp;
branches;
next	1.3;

1.3
date	2009.02.23.14.46.55;	author root;	state Exp;
branches;
next	1.2;

1.2
date	2008.10.12.00.10.45;	author root;	state Exp;
branches;
next	1.1;

1.1
date	2008.10.12.00.08.51;	author root;	state Exp;
branches;
next	;


desc
@@


1.4
log
@just fixing some language.
@
text
@#
# $Header: /usr/local/sbin/gentoo.periodic/RCS/readme.txt,v 1.3 2009/02/23 14:46:55 root Exp root $

= Gentoo Periodic = 

== Description ==

Gentoo-periodic is a set of system scripts developed to generate reports for the system
administrator(s). The idea is based on the 'periodic' systems common on the
*BSD platforms - but implementation is quite a bit simplified (no common
funciton, no conf file). Standard Output generated by cron running the
various other scripts is piped out to a mail command, and from there into the
Sysadmin mailbox. 

There are some basic requirements:
* vixie-cron (or a work-alike)
* the Bourne Again SHell (bash)
* the mail or mailx command
* some form of mail transport (postfix, sSMTP)
* slocate (or a work-alike)
* common system tools (ls, find, df, etc.)

And other requirement for optional scripts:
* chkrootkit
* openssh 
* iptables
* rkhunter

On top of all that, you can write your own scripts! 

== Installation ==

Installation is simple. 

1. Place the gentoo.periodic/ directory in a location of your choosing (I like
/usr/local/sbin).
2. Set up cron jobs to run the daily, weekly, monthly scripts. 
 
	Example Crontab Setup: (based on vixie-cron)
	# SYSTEM REPORTING
	# 3:01AM daily running as root
	01	3* * * root /usr/local/sbin/gentoo.periodic/gentoo.periodic.sh -d
	# 3:02AM every sunday running as root
	02	3* * sun root /usr/local/sbin/gentoo.periodic/gentoo.periodic.sh -w
	# 3:03AM on 28th of every month running as root	
	03	3* 28 * root /usr/local/sbin/gentoo.periodic/gentoo.periodic.sh -m

You may also optionally set up yearly scripts, but I have not seen the need to
actually use yearly scripts. If you want to run yearly jobs, you will need to
create a yearly/ directory and place scripts of your choice in that directory
for running.

== Usage ==

=== Directory Structure ===
The gentoo.periodic/ directory has a simple organization. 

	gentoo.periodic.sh - a bash script that simply sorts and runs other
	scripts. It has several command flags (see the above crontab example).
		-c: run script (mainly for debugging)
		-d: run daily scripts
		-h: HELP!
		-w: run weekly scripts
		-m: run monthly scripts
		-s: run security scripts
		-y: run yearly scripts

	daily/ - Scripts that will run on a daily basis.
	weekly/ - Scripts that will run on a weekly basis.
	monthly/ - Scripts that will run on a monthly basis.
	security/ - Scripts that are system security related.

	modules/ - A place to store scripts, this is not looked at by
	gentoo.periodic.sh.

=== Running Scripts In Order ===

The same method used by the *BSD periodic system is ued to run the scripts in
a predetermined order is used in gentoo.periodic as well. The system uses a
numbered prefix to the module name. Here is a working example.

	You have three script modules -- aaa.sh, bbb.sh and ccc.sh -- that you want
	to run daily. Script aaa.sh will not give you the proper output unless you
	run the ccc.sh first. To run the scripts in the correct order, you will
	need to copy the scripts from the modules/ direcotry into the daily/
	directory with a numeric prefix. The script with the lowest number will run
	first.

	# cp modules/ccc.sh daily/005.ccc.sh
	# cp modules/bbb.sh daily/010.bbb.sh
	# cp modules/aaa.sh daily/015.aaa.sh

== Gentoo Scripts ==

portage_update.sh: This script updates the portage tree (in --quiet mode) and
outputs the results of 'emerge --pretend world'. This script should run first
if you are going to run the glsa_check.sh script outlined below. This script
does NOT build any packages, it merely reports what updates to packages are
availiable. 

glsa_check.sh: This script checks the GLSA (Gentoo Linux Security Advisories)
database to see if your local system requires any vulnerability updates. It
relies on an updated portage tree (see portage_update.sh above). This script
does not preform any upgrades, it merely reports on what packages have
security issues. 

eclean.sh: This script checks the cleanliness of your portage tree. Both the
package and distribution trees are checked. This script does not do any actual
removal of files from the tree, it merely reports on what outdated files are
being held in the tree. 

== Writing Modules ==

The modules are simple bash scripts. All configuration is done in the scripts
themselves. Typically functions and global variables are defined at the top of
the script for later use. The echo command is used to output informational
content before running commands. Another echo command is used at the end of
the script for spacing and readability.

== FAQ ==

Q: The name is GENTOO.periodic, is it designed for gentoo systems only? 
A: The scripts were originally designed for gentoo-based systems (hence the
portage, glsa, and eclean scripts), however it should work just as well on
other systems as well. Simply remove the gentoo related scripts.



@


1.3
log
@added slocate as a basic requirement.
@
text
@d2 1
a2 1
# $Header: /usr/local/sbin/gentoo.periodic/RCS/readme.txt,v 1.2 2008/10/12 00:10:45 root Exp root $
d8 1
a8 1
Its a set of system scripts developed to generate reports for the system
@


1.2
log
@*** empty log message ***
@
text
@d2 1
a2 1
# $Header$
d20 1
@


1.1
log
@Initial revision
@
text
@d1 3
@
